# üéõÔ∏è –ö–Ω–æ–ø–∫–∏ –∏ –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã –≤ aiogram 3.x

## üìë –û–≥–ª–∞–≤–ª–µ–Ω–∏–µ

1. [–í–≤–µ–¥–µ–Ω–∏–µ](#–≤–≤–µ–¥–µ–Ω–∏–µ)
2. [–¢–∏–ø—ã –∫–ª–∞–≤–∏–∞—Ç—É—Ä –≤ Telegram](#—Ç–∏–ø—ã%20–∫–ª–∞–≤–∏–∞—Ç—É—Ä%20–≤%20telegram)
   - [Reply –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã](#reply%20–∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã)
   - [Inline –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã](#inline%20–∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã)
   - [–°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Ç–∏–ø–æ–≤](#—Å—Ä–∞–≤–Ω–µ–Ω–∏–µ%20—Ç–∏–ø–æ–≤)
3. [Reply –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã](#reply%20–∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã)
   - [–°–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–æ—Å—Ç–æ–π –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã](#—Å–æ–∑–¥–∞–Ω–∏–µ%20–ø—Ä–æ—Å—Ç–æ–π%20–∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã)
   - [–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã](#–Ω–∞—Å—Ç—Ä–æ–π–∫–∞%20–∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã)
   - [–°–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ –∫–Ω–æ–ø–∫–∏](#—Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ%20–∫–Ω–æ–ø–∫–∏)
   - [–£–¥–∞–ª–µ–Ω–∏–µ –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã](#—É–¥–∞–ª–µ–Ω–∏–µ%20–∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã)
4. [Inline –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã](#inline%20–∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã)
   - [–°–æ–∑–¥–∞–Ω–∏–µ inline –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã](#—Å–æ–∑–¥–∞–Ω–∏–µ%20inline%20–∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã)
   - [–¢–∏–ø—ã inline –∫–Ω–æ–ø–æ–∫](#—Ç–∏–ø—ã%20inline%20–∫–Ω–æ–ø–æ–∫)
   - [–û–±—Ä–∞–±–æ—Ç–∫–∞ –Ω–∞–∂–∞—Ç–∏–π](#–æ–±—Ä–∞–±–æ—Ç–∫–∞%20–Ω–∞–∂–∞—Ç–∏–π)
   - [–î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã](#–¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ%20–∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã)
5. [Keyboard Builder](#keyboard%20builder)
   - [ReplyKeyboardBuilder](#replykeyboardbuilder)
   - [InlineKeyboardBuilder](#inlinekeyboardbuilder)
   - [–ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏](#–ø—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–µ%20–≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏)
6. [–ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–∏–º–µ—Ä—ã](#–ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ%20–ø—Ä–∏–º–µ—Ä—ã)
   - [–ú–µ–Ω—é –±–æ—Ç–∞](#–º–µ–Ω—é%20–±–æ—Ç–∞)
   - [–û–ø—Ä–æ—Å–Ω–∏–∫](#–æ–ø—Ä–æ—Å–Ω–∏–∫)
   - [–ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞—è –∏–≥—Ä–∞](#–∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞—è%20–∏–≥—Ä–∞)
   - [–ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä](#–∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä)
7. [–õ—É—á—à–∏–µ –ø—Ä–∞–∫—Ç–∏–∫–∏](#–ª—É—á—à–∏–µ%20–ø—Ä–∞–∫—Ç–∏–∫–∏)
   - [–û—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è –∫–æ–¥–∞](#–æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è%20–∫–æ–¥–∞)
   - [–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫](#–æ–±—Ä–∞–±–æ—Ç–∫–∞%20–æ—à–∏–±–æ–∫)
   - [–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å](#–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å)
8. [–ó–∞–∫–ª—é—á–µ–Ω–∏–µ](#–∑–∞–∫–ª—é—á–µ–Ω–∏–µ)

---

## üìñ –í–≤–µ–¥–µ–Ω–∏–µ

–ö–Ω–æ–ø–∫–∏ –∏ –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã ‚Äî —ç—Ç–æ —Ç–æ, —á—Ç–æ –¥–µ–ª–∞–µ—Ç –±–æ—Ç–æ–≤ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–º–∏ –∏ —É–¥–æ–±–Ω—ã–º–∏ –≤ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏. –í–º–µ—Å—Ç–æ —Ç–æ–≥–æ —á—Ç–æ–±—ã –∑–∞–ø–æ–º–∏–Ω–∞—Ç—å –∫–æ–º–∞–Ω–¥—ã, –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –º–æ–≥—É—Ç –ø—Ä–æ—Å—Ç–æ –Ω–∞–∂–∏–º–∞—Ç—å –Ω–∞ –∫–Ω–æ–ø–∫–∏. –í —ç—Ç–æ–π –≥–ª–∞–≤–µ –º—ã –ø–æ–¥—Ä–æ–±–Ω–æ —Ä–∞–∑–±–µ—Ä–µ–º –≤—Å–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ —Ä–∞–±–æ—Ç—ã —Å –∫–ª–∞–≤–∏–∞—Ç—É—Ä–∞–º–∏ –≤ aiogram 3.x.

**–ü–æ—á–µ–º—É —ç—Ç–æ –≤–∞–∂–Ω–æ?**
- **–£–¥–æ–±—Å—Ç–≤–æ**: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º –Ω–µ –Ω—É–∂–Ω–æ –∑–∞–ø–æ–º–∏–Ω–∞—Ç—å –∫–æ–º–∞–Ω–¥—ã
- **–ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å**: –ö–Ω–æ–ø–∫–∏ –ø–æ–∑–≤–æ–ª—è—é—Ç —Å–æ–∑–¥–∞–≤–∞—Ç—å –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã
- **–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å**: –° –ø–æ–º–æ—â—å—é –∫–Ω–æ–ø–æ–∫ –º–æ–∂–Ω–æ –∑–∞–ø—Ä–∞—à–∏–≤–∞—Ç—å –∫–æ–Ω—Ç–∞–∫—Ç—ã, –ª–æ–∫–∞—Ü–∏–∏ –∏ –¥—Ä—É–≥–∏–µ –¥–∞–Ω–Ω—ã–µ
- **–ì–∏–±–∫–æ—Å—Ç—å**: –ö–ª–∞–≤–∏–∞—Ç—É—Ä—ã –º–æ–∂–Ω–æ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ –∏–∑–º–µ–Ω—è—Ç—å –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞

**–ß—Ç–æ –º—ã –∏–∑—É—á–∏–º:**
- –†–∞–∑–ª–∏—á–∏—è –º–µ–∂–¥—É reply –∏ inline –∫–ª–∞–≤–∏–∞—Ç—É—Ä–∞–º–∏
- –ö–∞–∫ —Å–æ–∑–¥–∞–≤–∞—Ç—å –∏ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—Ç—å –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã
- –°–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ —Ç–∏–ø—ã –∫–Ω–æ–ø–æ–∫
- –û–±—Ä–∞–±–æ—Ç–∫—É –Ω–∞–∂–∞—Ç–∏–π –Ω–∞ –∫–Ω–æ–ø–∫–∏
- –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
- –õ—É—á—à–∏–µ –ø—Ä–∞–∫—Ç–∏–∫–∏ –∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—é

–≠—Ç–∞ –≥–ª–∞–≤–∞ –Ω–∞–ø–∏—Å–∞–Ω–∞ –¥–ª—è –Ω–∞—á–∏–Ω–∞—é—â–∏—Ö, –Ω–æ —Å–æ–¥–µ—Ä–∂–∏—Ç –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –∏ –¥–ª—è –æ–ø—ã—Ç–Ω—ã—Ö —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤. –ú—ã –±—É–¥–µ–º –¥–≤–∏–≥–∞—Ç—å—Å—è –æ—Ç –ø—Ä–æ—Å—Ç–æ–≥–æ –∫ —Å–ª–æ–∂–Ω–æ–º—É, —Å –º–Ω–æ–∂–µ—Å—Ç–≤–æ–º –ø—Ä–∏–º–µ—Ä–æ–≤ –∏ –æ–±—ä—è—Å–Ω–µ–Ω–∏–π.

---

## ‚å®Ô∏è –¢–∏–ø—ã –∫–ª–∞–≤–∏–∞—Ç—É—Ä –≤ Telegram

–í Telegram —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –¥–≤–∞ –æ—Å–Ω–æ–≤–Ω—ã—Ö —Ç–∏–ø–∞ –∫–ª–∞–≤–∏–∞—Ç—É—Ä: reply –∏ inline. –ö–∞–∂–¥—ã–π —Ç–∏–ø –∏–º–µ–µ—Ç —Å–≤–æ–∏ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ –∏ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ.

### Reply –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã

**Reply –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã** ‚Äî —ç—Ç–æ –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã, –∫–æ—Ç–æ—Ä—ã–µ –ø–æ—è–≤–ª—è—é—Ç—Å—è –≤ –ø–æ–ª–µ –≤–≤–æ–¥–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏ –∑–∞–º–µ–Ω—è—é—Ç —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—É—é –∫–ª–∞–≤–∏–∞—Ç—É—Ä—É —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞.

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- –ü–æ—è–≤–ª—è—é—Ç—Å—è –≤–Ω–∏–∑—É —ç–∫—Ä–∞–Ω–∞, –Ω–∞–¥ –ø–æ–ª–µ–º –≤–≤–æ–¥–∞
- –ó–∞–º–µ–Ω—è—é—Ç —Å–∏—Å—Ç–µ–º–Ω—É—é –∫–ª–∞–≤–∏–∞—Ç—É—Ä—É
- –ú–æ–≥—É—Ç —Å–æ–¥–µ—Ä–∂–∞—Ç—å —Ç–µ–∫—Å—Ç–æ–≤—ã–µ –∫–Ω–æ–ø–∫–∏ –∏ —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ –∫–Ω–æ–ø–∫–∏ –∑–∞–ø—Ä–æ—Å–∞
- –í–∏–¥–Ω—ã –ø–æ—Å—Ç–æ—è–Ω–Ω–æ, –ø–æ–∫–∞ –Ω–µ –±—É–¥—É—Ç —É–¥–∞–ª–µ–Ω—ã
- –ü–æ–¥—Ö–æ–¥—è—Ç –¥–ª—è –æ—Å–Ω–æ–≤–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π –±–æ—Ç–∞

**–ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:**
- –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é –±–æ—Ç–∞
- –ß–∞—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –∫–æ–º–∞–Ω–¥—ã
- –ö–Ω–æ–ø–∫–∏ –∑–∞–ø—Ä–æ—Å–∞ –∫–æ–Ω—Ç–∞–∫—Ç–∞ –∏–ª–∏ –ª–æ–∫–∞—Ü–∏–∏

### Inline –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã

**Inline –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã** ‚Äî —ç—Ç–æ –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã, –∫–æ—Ç–æ—Ä—ã–µ –≤—Å—Ç—Ä–∞–∏–≤–∞—é—Ç—Å—è –ø—Ä—è–º–æ –≤ —Å–æ–æ–±—â–µ–Ω–∏–µ.

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- –í—Å—Ç—Ä–æ–µ–Ω—ã –≤ —Å–æ–æ–±—â–µ–Ω–∏–µ
- –ù–µ –∑–∞–º–µ–Ω—è—é—Ç —Å–∏—Å—Ç–µ–º–Ω—É—é –∫–ª–∞–≤–∏–∞—Ç—É—Ä—É
- –ú–æ–≥—É—Ç —Å–æ–¥–µ—Ä–∂–∞—Ç—å –∫–Ω–æ–ø–∫–∏ —Å —Ä–∞–∑–ª–∏—á–Ω—ã–º–∏ –¥–µ–π—Å—Ç–≤–∏—è–º–∏
- –í–∏–¥–Ω—ã —Ç–æ–ª—å–∫–æ –≤–º–µ—Å—Ç–µ —Å —Å–æ–æ–±—â–µ–Ω–∏–µ–º
- –ü–æ–¥—Ö–æ–¥—è—Ç –¥–ª—è –∫–æ–Ω—Ç–µ–∫—Å—Ç–Ω—ã—Ö –¥–µ–π—Å—Ç–≤–∏–π

**–ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:**
- –ö–Ω–æ–ø–∫–∏ "–ù—Ä–∞–≤–∏—Ç—Å—è/–ù–µ –Ω—Ä–∞–≤–∏—Ç—Å—è" –ø–æ–¥ –ø–æ—Å—Ç–æ–º
- –í—ã–±–æ—Ä –≤–∞—Ä–∏–∞–Ω—Ç–∞ –≤ –æ–ø—Ä–æ—Å–µ
- –°—Å—ã–ª–∫–∏ –∏ –¥–µ–π—Å—Ç–≤–∏—è –≤ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏—è—Ö

### –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Ç–∏–ø–æ–≤

| –•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∞ | Reply –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã | Inline –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã |
|----------------|------------------|-------------------|
| –†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ | –ü–æ–ª–µ –≤–≤–æ–¥–∞ | –í —Å–æ–æ–±—â–µ–Ω–∏–∏ |
| –í—Ä–µ–º—è –∂–∏–∑–Ω–∏ | –ü–æ—Å—Ç–æ—è–Ω–Ω–æ | –ü–æ–∫–∞ –≤–∏–¥–Ω–æ —Å–æ–æ–±—â–µ–Ω–∏–µ |
| –ó–∞–º–µ–Ω–∞ –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã | –î–∞ | –ù–µ—Ç |
| –°–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ –∫–Ω–æ–ø–∫–∏ | –ó–∞–ø—Ä–æ—Å –∫–æ–Ω—Ç–∞–∫—Ç–∞, –ª–æ–∫–∞—Ü–∏–∏, –æ–ø—Ä–æ—Å–∞ | –°—Å—ã–ª–∫–∏, callback, –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —Ä–µ–∂–∏–º–∞ |
| –ö–æ–Ω—Ç–µ–∫—Å—Ç | –ì–ª–æ–±–∞–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ | –ö–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è |
| –í–∏–¥–∏–º–æ—Å—Ç—å | –í—Å–µ–≥–¥–∞ –Ω–∞ —ç–∫—Ä–∞–Ω–µ | –¢–æ–ª—å–∫–æ —Å —Å–æ–æ–±—â–µ–Ω–∏–µ–º |

---

## üîß Reply –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã

Reply –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã ‚Äî —ç—Ç–æ –º–æ—â–Ω—ã–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –ø–æ—Å—Ç–æ—è–Ω–Ω–æ–≥–æ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ –±–æ—Ç–∞. –î–∞–≤–∞–π—Ç–µ –ø–æ–¥—Ä–æ–±–Ω–æ —Ä–∞–∑–±–µ—Ä–µ–º, –∫–∞–∫ —Å –Ω–∏–º–∏ —Ä–∞–±–æ—Ç–∞—Ç—å.

### –°–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–æ—Å—Ç–æ–π –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã

–°–∞–º—ã–π –ø—Ä–æ—Å—Ç–æ–π —Å–ø–æ—Å–æ–± —Å–æ–∑–¥–∞—Ç—å reply –∫–ª–∞–≤–∏–∞—Ç—É—Ä—É ‚Äî –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `ReplyKeyboardMarkup`:

```python
from aiogram.types import ReplyKeyboardMarkup, KeyboardButton

@dp.message(F.text == "–ø–æ–∫–∞–∂–∏ –∫–ª–∞–≤–∏–∞—Ç—É—Ä—É")
async def show_keyboard(message: types.Message):
    # –°–æ–∑–¥–∞–µ–º –∫–ª–∞–≤–∏–∞—Ç—É—Ä—É
    keyboard = ReplyKeyboardMarkup(
        keyboard=[
            [
                KeyboardButton(text="üè† –ì–ª–∞–≤–Ω–∞—è"),
                KeyboardButton(text="‚ÑπÔ∏è –ü–æ–º–æ—â—å")
            ],
            [
                KeyboardButton(text="üìû –ö–æ–Ω—Ç–∞–∫—Ç—ã"),
                KeyboardButton(text="‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏")
            ]
        ],
        resize_keyboard=True  # –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–¥–≥–æ–Ω—è—Ç—å —Ä–∞–∑–º–µ—Ä
    )
    
    await message.answer(
        "–í—ã–±–µ—Ä–∏—Ç–µ —Ä–∞–∑–¥–µ–ª:",
        reply_markup=keyboard
    )
```

**–ß—Ç–æ –∑–¥–µ—Å—å –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç:**
1. `ReplyKeyboardMarkup` ‚Äî –∫–ª–∞—Å—Å –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è reply –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã
2. `keyboard` ‚Äî –¥–≤—É–º–µ—Ä–Ω—ã–π —Å–ø–∏—Å–æ–∫ –∫–Ω–æ–ø–æ–∫ (–∫–∞–∂–¥—ã–π –≤–ª–æ–∂–µ–Ω–Ω—ã–π —Å–ø–∏—Å–æ–∫ ‚Äî —ç—Ç–æ —Ä—è–¥)
3. `KeyboardButton` ‚Äî –∫–ª–∞—Å—Å –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∫–Ω–æ–ø–∫–∏
4. `resize_keyboard=True` ‚Äî –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–¥–≥–æ–Ω—è–µ—Ç —Ä–∞–∑–º–µ—Ä –∫–Ω–æ–ø–æ–∫

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã

ReplyKeyboardMarkup –∏–º–µ–µ—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ –ø–æ–ª–µ–∑–Ω—ã—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤:

```python
@dp.message(F.text == "–Ω–∞—Å—Ç—Ä–æ–µ–Ω–Ω–∞—è –∫–ª–∞–≤–∏–∞—Ç—É—Ä–∞")
async def configured_keyboard(message: types.Message):
    keyboard = ReplyKeyboardMarkup(
        keyboard=[
            [KeyboardButton(text="–ö–Ω–æ–ø–∫–∞ 1"), KeyboardButton(text="–ö–Ω–æ–ø–∫–∞ 2")],
            [KeyboardButton(text="–ö–Ω–æ–ø–∫–∞ 3")]
        ],
        resize_keyboard=True,      # –ê–≤—Ç–æ–ø–æ–¥–±–æ—Ä —Ä–∞–∑–º–µ—Ä–∞
        one_time_keyboard=True,     # –°–∫—Ä—ã—Ç—å –ø–æ—Å–ª–µ –Ω–∞–∂–∞—Ç–∏—è
        selective=True,            # –ü–æ–∫–∞–∑–∞—Ç—å —Ç–æ–ª—å–∫–æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–º—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é
        input_field_placeholder="–í—ã–±–µ—Ä–∏—Ç–µ –æ–ø—Ü–∏—é..."  # –¢–µ–∫—Å—Ç –≤ –ø–æ–ª–µ –≤–≤–æ–¥–∞
    )
    
    await message.answer(
        "–ù–∞—Å—Ç—Ä–æ–µ–Ω–Ω–∞—è –∫–ª–∞–≤–∏–∞—Ç—É—Ä–∞:",
        reply_markup=keyboard
    )
```

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã ReplyKeyboardMarkup:**
- `resize_keyboard` ‚Äî –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–¥–≥–æ–Ω—è—Ç—å —Ä–∞–∑–º–µ—Ä –∫–Ω–æ–ø–æ–∫
- `one_time_keyboard` ‚Äî —Å–∫—Ä—ã—Ç—å –∫–ª–∞–≤–∏–∞—Ç—É—Ä—É –ø–æ—Å–ª–µ –Ω–∞–∂–∞—Ç–∏—è
- `selective` ‚Äî –ø–æ–∫–∞–∑–∞—Ç—å –∫–ª–∞–≤–∏–∞—Ç—É—Ä—É —Ç–æ–ª—å–∫–æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–º—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é
- `input_field_placeholder` ‚Äî —Ç–µ–∫—Å—Ç-–ø–æ–¥—Å–∫–∞–∑–∫–∞ –≤ –ø–æ–ª–µ –≤–≤–æ–¥–∞

### –°–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ –∫–Ω–æ–ø–∫–∏

Telegram –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ —Ç–∏–ø—ã –∫–Ω–æ–ø–æ–∫ –¥–ª—è –∑–∞–ø—Ä–æ—Å–∞ –¥–∞–Ω–Ω—ã—Ö:

#### –ö–Ω–æ–ø–∫–∞ –∑–∞–ø—Ä–æ—Å–∞ –∫–æ–Ω—Ç–∞–∫—Ç–∞

```python
@dp.message(F.text == "–∑–∞–ø—Ä–æ—Å –∫–æ–Ω—Ç–∞–∫—Ç–∞")
async def request_contact(message: types.Message):
    keyboard = ReplyKeyboardMarkup(
        keyboard=[
            [KeyboardButton(text="üìû –û—Ç–ø—Ä–∞–≤–∏—Ç—å –∫–æ–Ω—Ç–∞–∫—Ç", request_contact=True)]
        ],
        resize_keyboard=True
    )
    
    await message.answer(
        "–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –æ—Ç–ø—Ä–∞–≤—å—Ç–µ –≤–∞—à –∫–æ–Ω—Ç–∞–∫—Ç:",
        reply_markup=keyboard
    )

# –û–±—Ä–∞–±–æ—Ç–∫–∞ –ø–æ–ª—É—á–µ–Ω–Ω–æ–≥–æ –∫–æ–Ω—Ç–∞–∫—Ç–∞
@dp.message(F.contact)
async def handle_contact(message: types.Message):
    contact = message.contact
    await message.answer(
        f"–°–ø–∞—Å–∏–±–æ! –í–∞—à –∫–æ–Ω—Ç–∞–∫—Ç:\n"
        f"–¢–µ–ª–µ—Ñ–æ–Ω: {contact.phone_number}\n"
        f"–ò–º—è: {contact.first_name}"
    )
```

#### –ö–Ω–æ–ø–∫–∞ –∑–∞–ø—Ä–æ—Å–∞ –ª–æ–∫–∞—Ü–∏–∏

```python
@dp.message(F.text == "–∑–∞–ø—Ä–æ—Å –ª–æ–∫–∞—Ü–∏–∏")
async def request_location(message: types.Message):
    keyboard = ReplyKeyboardMarkup(
        keyboard=[
            [KeyboardButton(text="üìç –û—Ç–ø—Ä–∞–≤–∏—Ç—å –ª–æ–∫–∞—Ü–∏—é", request_location=True)]
        ],
        resize_keyboard=True
    )
    
    await message.answer(
        "–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –æ—Ç–ø—Ä–∞–≤—å—Ç–µ –≤–∞—à—É –ª–æ–∫–∞—Ü–∏—é:",
        reply_markup=keyboard
    )

# –û–±—Ä–∞–±–æ—Ç–∫–∞ –ø–æ–ª—É—á–µ–Ω–Ω–æ–π –ª–æ–∫–∞—Ü–∏–∏
@dp.message(F.location)
async def handle_location(message: types.Message):
    location = message.location
    await message.answer(
        f"–°–ø–∞—Å–∏–±–æ! –í–∞—à–∞ –ª–æ–∫–∞—Ü–∏—è:\n"
        f"–®–∏—Ä–æ—Ç–∞: {location.latitude}\n"
        f"–î–æ–ª–≥–æ—Ç–∞: {location.longitude}"
    )
```

#### –ö–Ω–æ–ø–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è –æ–ø—Ä–æ—Å–∞

```python
from aiogram.types import KeyboardButtonPollType

@dp.message(F.text == "—Å–æ–∑–¥–∞—Ç—å –æ–ø—Ä–æ—Å")
async def create_poll(message: types.Message):
    keyboard = ReplyKeyboardMarkup(
        keyboard=[
            [
                KeyboardButton(
                    text="üìä –°–æ–∑–¥–∞—Ç—å –æ–ø—Ä–æ—Å",
                    request_poll=KeyboardButtonPollType(type="regular")
                )
            ]
        ],
        resize_keyboard=True
    )
    
    await message.answer(
        "–°–æ–∑–¥–∞–π—Ç–µ –æ–ø—Ä–æ—Å:",
        reply_markup=keyboard
    )
```

#### –ö–Ω–æ–ø–∫–∞ –∑–∞–ø—Ä–æ—Å–∞ –≤–∏–∫—Ç–æ—Ä–∏–Ω—ã

```python
@dp.message(F.text == "—Å–æ–∑–¥–∞—Ç—å –≤–∏–∫—Ç–æ—Ä–∏–Ω—É")
async def create_quiz(message: types.Message):
    keyboard = ReplyKeyboardMarkup(
        keyboard=[
            [
                KeyboardButton(
                    text="üß† –°–æ–∑–¥–∞—Ç—å –≤–∏–∫—Ç–æ—Ä–∏–Ω—É",
                    request_poll=KeyboardButtonPollType(type="quiz")
                )
            ]
        ],
        resize_keyboard=True
    )
    
    await message.answer(
        "–°–æ–∑–¥–∞–π—Ç–µ –≤–∏–∫—Ç–æ—Ä–∏–Ω—É:",
        reply_markup=keyboard
    )
```

### –£–¥–∞–ª–µ–Ω–∏–µ –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã

–ß—Ç–æ–±—ã —É–±—Ä–∞—Ç—å reply –∫–ª–∞–≤–∏–∞—Ç—É—Ä—É –∏ –≤–µ—Ä–Ω—É—Ç—å —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—É—é, –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `ReplyKeyboardRemove`:

```python
from aiogram.types import ReplyKeyboardRemove

@dp.message(F.text == "—É–±—Ä–∞—Ç—å –∫–ª–∞–≤–∏–∞—Ç—É—Ä—É")
async def remove_keyboard(message: types.Message):
    await message.answer(
        "–ö–ª–∞–≤–∏–∞—Ç—É—Ä–∞ —É–¥–∞–ª–µ–Ω–∞",
        reply_markup=ReplyKeyboardRemove()
    )
```

---

## üîó Inline –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã

Inline –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã ‚Äî —ç—Ç–æ –≥–∏–±–∫–∏–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π. –î–∞–≤–∞–π—Ç–µ —Ä–∞–∑–±–µ—Ä–µ–º –≤—Å–µ –∞—Å–ø–µ–∫—Ç—ã —Ä–∞–±–æ—Ç—ã —Å –Ω–∏–º–∏.

### –°–æ–∑–¥–∞–Ω–∏–µ inline –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã

–î–ª—è —Å–æ–∑–¥–∞–Ω–∏—è inline –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `InlineKeyboardMarkup`:

```python
from aiogram.types import InlineKeyboardMarkup, InlineKeyboardButton

@dp.message(F.text == "inline –∫–ª–∞–≤–∏–∞—Ç—É—Ä–∞")
async def inline_keyboard_demo(message: types.Message):
    keyboard = InlineKeyboardMarkup(
        inline_keyboard=[
            [
                InlineKeyboardButton(text="üëç", callback_data="like"),
                InlineKeyboardButton(text="üëé", callback_data="dislike")
            ],
            [
                InlineKeyboardButton(text="üîÑ –û–±–Ω–æ–≤–∏—Ç—å", callback_data="refresh"),
                InlineKeyboardButton(text="‚ùå –ó–∞–∫—Ä—ã—Ç—å", callback_data="close")
            ]
        ]
    )
    
    await message.answer(
        "–í—ã–±–µ—Ä–∏—Ç–µ –¥–µ–π—Å—Ç–≤–∏–µ:",
        reply_markup=keyboard
    )
```

**–ß—Ç–æ –∑–¥–µ—Å—å –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç:**
1. `InlineKeyboardMarkup` ‚Äî –∫–ª–∞—Å—Å –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è inline –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã
2. `inline_keyboard` ‚Äî –¥–≤—É–º–µ—Ä–Ω—ã–π —Å–ø–∏—Å–æ–∫ –∫–Ω–æ–ø–æ–∫
3. `InlineKeyboardButton` ‚Äî –∫–ª–∞—Å—Å –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∫–Ω–æ–ø–∫–∏
4. `callback_data` ‚Äî –¥–∞–Ω–Ω—ã–µ, –∫–æ—Ç–æ—Ä—ã–µ –æ—Ç–ø—Ä–∞–≤—è—Ç—Å—è –ø—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏

### –¢–∏–ø—ã inline –∫–Ω–æ–ø–æ–∫

Inline –∫–Ω–æ–ø–∫–∏ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç —Ä–∞–∑–ª–∏—á–Ω—ã–µ —Ç–∏–ø—ã –¥–µ–π—Å—Ç–≤–∏–π:

#### Callback –∫–Ω–æ–ø–∫–∏

–°–∞–º—ã–π —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–µ–Ω–Ω—ã–π —Ç–∏–ø ‚Äî –∫–Ω–æ–ø–∫–∏ —Å callback:

```python
@dp.message(F.text == "callback –∫–Ω–æ–ø–∫–∏")
async def callback_buttons(message: types.Message):
    keyboard = InlineKeyboardMarkup(
        inline_keyboard=[
            [
                InlineKeyboardButton(
                    text="üî¥ –ö—Ä–∞—Å–Ω—ã–π",
                    callback_data="color_red"
                ),
                InlineKeyboardButton(
                    text="üîµ –°–∏–Ω–∏–π",
                    callback_data="color_blue"
                )
            ],
            [
                InlineKeyboardButton(
                    text="üü¢ –ó–µ–ª–µ–Ω—ã–π",
                    callback_data="color_green"
                )
            ]
        ]
    )
    
    await message.answer(
        "–í—ã–±–µ—Ä–∏—Ç–µ —Ü–≤–µ—Ç:",
        reply_markup=keyboard
    )

# –û–±—Ä–∞–±–æ—Ç–∫–∞ –Ω–∞–∂–∞—Ç–∏–π
@dp.callback_query()
async def handle_color_callback(callback: types.CallbackQuery):
    if callback.data == "color_red":
        await callback.message.edit_text("–í—ã –≤—ã–±—Ä–∞–ª–∏ –∫—Ä–∞—Å–Ω—ã–π —Ü–≤–µ—Ç! üî¥")
    elif callback.data == "color_blue":
        await callback.message.edit_text("–í—ã –≤—ã–±—Ä–∞–ª–∏ —Å–∏–Ω–∏–π —Ü–≤–µ—Ç! üîµ")
    elif callback.data == "color_green":
        await callback.message.edit_text("–í—ã –≤—ã–±—Ä–∞–ª–∏ –∑–µ–ª–µ–Ω—ã–π —Ü–≤–µ—Ç! üü¢")
    
    # –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –æ—Ç–≤–µ—á–∞–µ–º –Ω–∞ callback
    await callback.answer()
```

#### URL –∫–Ω–æ–ø–∫–∏

–ö–Ω–æ–ø–∫–∏, –∫–æ—Ç–æ—Ä—ã–µ –æ—Ç–∫—Ä—ã–≤–∞—é—Ç –≤–µ–±-—Å—Å—ã–ª–∫–∏:

```python
@dp.message(F.text == "url –∫–Ω–æ–ø–∫–∏")
async def url_buttons(message: types.Message):
    keyboard = InlineKeyboardMarkup(
        inline_keyboard=[
            [
                InlineKeyboardButton(
                    text="üåê –û—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–π —Å–∞–π—Ç",
                    url="https://example.com"
                ),
                InlineKeyboardButton(
                    text="üìß –ù–∞–ø–∏—Å–∞—Ç—å –ø–∏—Å—å–º–æ",
                    url="mailto:support@example.com"
                )
            ],
            [
                InlineKeyboardButton(
                    text="üì± –ù–∞—à Telegram",
                    url="https://t.me/example"
                )
            ]
        ]
    )
    
    await message.answer(
        "–ü–æ–ª–µ–∑–Ω—ã–µ —Å—Å—ã–ª–∫–∏:",
        reply_markup=keyboard
    )
```

#### –ö–Ω–æ–ø–∫–∏ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è —Ä–µ–∂–∏–º–∞

–ö–Ω–æ–ø–∫–∏ –¥–ª—è –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è –≤ inline —Ä–µ–∂–∏–º:

```python
@dp.message(F.text == "–ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —Ä–µ–∂–∏–º–∞")
async def switch_inline_buttons(message: types.Message):
    keyboard = InlineKeyboardMarkup(
        inline_keyboard=[
            [
                InlineKeyboardButton(
                    text="üîç –ü–æ–∏—Å–∫ –≤ —ç—Ç–æ–º –±–æ—Ç–µ",
                    switch_inline_query="search"
                ),
                InlineKeyboardButton(
                    text="üí¨ –ü–æ–∏—Å–∫ –≤ —á–∞—Ç–µ",
                    switch_inline_query_current_chat="chat_search"
                )
            ]
        ]
    )
    
    await message.answer(
        "–ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —Ä–µ–∂–∏–º–∞:",
        reply_markup=keyboard
    )
```

#### –ö–Ω–æ–ø–∫–∏ —Å –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ–º

–ö–Ω–æ–ø–∫–∏ –¥–ª—è –æ—Ç–∫—Ä—ã—Ç–∏—è –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π:

```python
@dp.message(F.text == "–≤–µ–± –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ")
async def web_app_buttons(message: types.Message):
    keyboard = InlineKeyboardMarkup(
        inline_keyboard=[
            [
                InlineKeyboardButton(
                    text="üéÆ –ò–≥—Ä–∞—Ç—å",
                    web_app=types.WebAppInfo(url="https://example.com/game")
                )
            ]
        ]
    )
    
    await message.answer(
        "–û—Ç–∫—Ä–æ–π—Ç–µ –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ:",
        reply_markup=keyboard
    )
```

#### –ö–Ω–æ–ø–∫–∏ –≤—Ö–æ–¥–∞ –≤ —á–∞—Ç

–ö–Ω–æ–ø–∫–∏ –¥–ª—è –≤—Ö–æ–¥–∞ –≤ —á–∞—Ç (—Ç–æ–ª—å–∫–æ –¥–ª—è —Å—É–ø–µ—Ä–≥—Ä—É–ø–ø –∏ –∫–∞–Ω–∞–ª–æ–≤):

```python
@dp.message(F.text == "–≤—Ö–æ–¥ –≤ —á–∞—Ç")
async def login_buttons(message: types.Message):
    keyboard = InlineKeyboardMarkup(
        inline_keyboard=[
            [
                InlineKeyboardButton(
                    text="üîì –í–æ–π—Ç–∏ –≤ —á–∞—Ç",
                    login_url=types.LoginUrl(
                        url="https://example.com/auth",
                        forward_text="–í—ã –≤–æ—à–ª–∏ –≤ —á–∞—Ç!",
                        bot_username="your_bot",
                        request_write_access=True
                    )
                )
            ]
        ]
    )
    
    await message.answer(
        "–î–ª—è –≤—Ö–æ–¥–∞ –≤ —á–∞—Ç –Ω–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É:",
        reply_markup=keyboard
    )
```

### –û–±—Ä–∞–±–æ—Ç–∫–∞ –Ω–∞–∂–∞—Ç–∏–π

–û–±—Ä–∞–±–æ—Ç–∫–∞ –Ω–∞–∂–∞—Ç–∏–π –Ω–∞ inline –∫–Ω–æ–ø–∫–∏ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç —á–µ—Ä–µ–∑ `callback_query`:

```python
@dp.callback_query()
async def handle_callback(callback: types.CallbackQuery):
    # –ü–æ–ª—É—á–∞–µ–º –¥–∞–Ω–Ω—ã–µ –∫–Ω–æ–ø–∫–∏
    data = callback.data
    
    # –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
    await callback.answer(f"–í—ã –Ω–∞–∂–∞–ª–∏ –∫–Ω–æ–ø–∫—É: {data}")
    
    # –†–µ–¥–∞–∫—Ç–∏—Ä—É–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ
    await callback.message.edit_text(
        f"–í—ã –≤—ã–±—Ä–∞–ª–∏: {data}",
        reply_markup=None  # –£–±–∏—Ä–∞–µ–º –∫–ª–∞–≤–∏–∞—Ç—É—Ä—É
    )
```

**–í–∞–∂–Ω—ã–µ –º–æ–º–µ–Ω—Ç—ã:**
1. –í—Å–µ–≥–¥–∞ –æ—Ç–≤–µ—á–∞–π—Ç–µ –Ω–∞ callback —Å –ø–æ–º–æ—â—å—é `callback.answer()`
2. –ú–æ–∂–Ω–æ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ —Å –ø–æ–º–æ—â—å—é `callback.message.edit_text()`
3. –ú–æ–∂–Ω–æ –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å –Ω–æ–≤—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è
4. –î–ª—è –¥–ª–∏—Ç–µ–ª—å–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `callback.answer("–û–±—Ä–∞–±–æ—Ç–∫–∞...", show_alert=False)`

#### –ü—Ä–æ–¥–≤–∏–Ω—É—Ç–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞

```python
@dp.callback_query()
async def advanced_callback_handler(callback: types.CallbackQuery):
    # –†–∞–∑–±–∏—Ä–∞–µ–º callback_data
    data_parts = callback.data.split("_")
    action = data_parts[0]
    item_id = data_parts[1] if len(data_parts) > 1 else None
    
    # –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ –∑–∞–≥—Ä—É–∑–∫–µ
    await callback.answer("–û–±—Ä–∞–±–æ—Ç–∫–∞...", show_alert=False)
    
    # –í—ã–ø–æ–ª–Ω—è–µ–º –¥–µ–π—Å—Ç–≤–∏–µ
    if action == "delete":
        # –£–¥–∞–ª—è–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ
        await callback.message.delete()
    elif action == "edit":
        # –†–µ–¥–∞–∫—Ç–∏—Ä—É–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ
        await callback.message.edit_text(
            f"–û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–æ: {item_id}",
            reply_markup=callback.message.reply_markup
        )
    elif action == "alert":
        # –ü–æ–∫–∞–∑—ã–≤–∞–µ–º alert
        await callback.answer("–≠—Ç–æ –≤–∞–∂–Ω–æ–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ!", show_alert=True)
    
    # –ï—Å–ª–∏ –Ω–µ –æ—Ç–≤–µ—Ç–∏–ª–∏ —Ä–∞–Ω–µ–µ
    try:
        await callback.answer()
    except:
        pass
```

### –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã

Inline –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã –º–æ–∂–Ω–æ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ –∏–∑–º–µ–Ω—è—Ç—å –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞:

```python
# –•—Ä–∞–Ω–∏–ª–∏—â–µ —Å–æ—Å—Ç–æ—è–Ω–∏–π
user_states = {}

@dp.message(F.text == "–¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∞—è –∫–ª–∞–≤–∏–∞—Ç—É—Ä–∞")
async def dynamic_keyboard(message: types.Message):
    # –°–æ–∑–¥–∞–µ–º –Ω–∞—á–∞–ª—å–Ω—É—é –∫–ª–∞–≤–∏–∞—Ç—É—Ä—É
    keyboard = InlineKeyboardMarkup(
        inline_keyboard=[
            [
                InlineKeyboardButton(text="üìä –ü–æ–∫–∞–∑–∞—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É", callback_data="show_stats"),
                InlineKeyboardButton(text="‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏", callback_data="settings")
            ]
        ]
    )
    
    # –°–æ—Ö—Ä–∞–Ω—è–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ
    user_states[message.from_user.id] = "main"
    
    await message.answer(
        "–î–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–µ –º–µ–Ω—é:",
        reply_markup=keyboard
    )

@dp.callback_query()
async def dynamic_callback(callback: types.CallbackQuery):
    user_id = callback.from_user.id
    current_state = user_states.get(user_id, "main")
    
    if callback.data == "show_stats":
        # –ö–ª–∞–≤–∏–∞—Ç—É—Ä–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
        keyboard = InlineKeyboardMarkup(
            inline_keyboard=[
                [
                    InlineKeyboardButton(text="üìà –î–Ω–µ–≤–Ω–∞—è", callback_data="stats_day"),
                    InlineKeyboardButton(text="üìä –ù–µ–¥–µ–ª—å–Ω–∞—è", callback_data="stats_week")
                ],
                [
                    InlineKeyboardButton(text="üîô –ù–∞–∑–∞–¥", callback_data="back")
                ]
            ]
        )
        
        await callback.message.edit_text(
            "–í—ã–±–µ—Ä–∏—Ç–µ –ø–µ—Ä–∏–æ–¥ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏:",
            reply_markup=keyboard
        )
        user_states[user_id] = "stats"
        
    elif callback.data == "settings":
        # –ö–ª–∞–≤–∏–∞—Ç—É—Ä–∞ –Ω–∞—Å—Ç—Ä–æ–µ–∫
        keyboard = InlineKeyboardMarkup(
            inline_keyboard=[
                [
                    InlineKeyboardButton(text="üîî –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è", callback_data="notif"),
                    InlineKeyboardButton(text="üåê –Ø–∑—ã–∫", callback_data="lang")
                ],
                [
                    InlineKeyboardButton(text="üîô –ù–∞–∑–∞–¥", callback_data="back")
                ]
            ]
        )
        
        await callback.message.edit_text(
            "–ù–∞—Å—Ç—Ä–æ–π–∫–∏:",
            reply_markup=keyboard
        )
        user_states[user_id] = "settings"
        
    elif callback.data == "back":
        # –í–æ–∑–≤—Ä–∞—Ç –≤ –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é
        keyboard = InlineKeyboardMarkup(
            inline_keyboard=[
                [
                    InlineKeyboardButton(text="üìä –ü–æ–∫–∞–∑–∞—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É", callback_data="show_stats"),
                    InlineKeyboardButton(text="‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏", callback_data="settings")
                ]
            ]
        )
        
        await callback.message.edit_text(
            "–î–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–µ –º–µ–Ω—é:",
            reply_markup=keyboard
        )
        user_states[user_id] = "main"
    
    await callback.answer()
```

---

## üõ†Ô∏è Keyboard Builder

Aiogram 3.x –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç —É–¥–æ–±–Ω—ã–µ –±–∏–ª–¥–µ—Ä—ã –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∫–ª–∞–≤–∏–∞—Ç—É—Ä. –û–Ω–∏ –¥–µ–ª–∞—é—Ç –∫–æ–¥ –±–æ–ª–µ–µ —á–∏—Ç–∞–µ–º—ã–º –∏ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–º.

### ReplyKeyboardBuilder

–ë–∏–ª–¥–µ—Ä –¥–ª—è reply –∫–ª–∞–≤–∏–∞—Ç—É—Ä:

```python
from aiogram.utils.keyboard import ReplyKeyboardBuilder

@dp.message(F.text == "reply –±–∏–ª–¥–µ—Ä")
async def reply_builder_demo(message: types.Message):
    builder = ReplyKeyboardBuilder()
    
    # –î–æ–±–∞–≤–ª—è–µ–º –∫–Ω–æ–ø–∫–∏
    builder.add(KeyboardButton(text="üè† –ì–ª–∞–≤–Ω–∞—è"))
    builder.add(KeyboardButton(text="‚ÑπÔ∏è –ü–æ–º–æ—â—å"))
    builder.add(KeyboardButton(text="üìû –ö–æ–Ω—Ç–∞–∫—Ç—ã"))
    builder.add(KeyboardButton(text="‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏"))
    
    # –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ (2 –∫–Ω–æ–ø–∫–∏ –≤ —Ä—è–¥)
    builder.adjust(2)
    
    # –ü–æ–ª—É—á–∞–µ–º –∫–ª–∞–≤–∏–∞—Ç—É—Ä—É
    keyboard = builder.as_markup(
        resize_keyboard=True,
        one_time_keyboard=True
    )
    
    await message.answer(
        "–ö–ª–∞–≤–∏–∞—Ç—É—Ä–∞ —Å–æ–∑–¥–∞–Ω–∞ —Å –ø–æ–º–æ—â—å—é –±–∏–ª–¥–µ—Ä–∞:",
        reply_markup=keyboard
    )
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –±–∏–ª–¥–µ—Ä–∞:**
- –ß–∏—Ç–∞–µ–º–æ—Å—Ç—å –∫–æ–¥–∞
- –õ–µ–≥–∫–æ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä—è–¥–∞–º–∏

### InlineKeyboardBuilder

–ë–∏–ª–¥–µ—Ä –¥–ª—è inline –∫–ª–∞–≤–∏–∞—Ç—É—Ä:

```python
from aiogram.utils.keyboard import InlineKeyboardBuilder

@dp.message(F.text == "inline –±–∏–ª–¥–µ—Ä")
async def inline_builder_demo(message: types.Message):
    builder = InlineKeyboardBuilder()
    
    # –î–æ–±–∞–≤–ª—è–µ–º –∫–Ω–æ–ø–∫–∏
    builder.add(InlineKeyboardButton(text="üëç", callback_data="like"))
    builder.add(InlineKeyboardButton(text="üëé", callback_data="dislike"))
    builder.add(InlineKeyboardButton(text="üîÑ", callback_data="refresh"))
    builder.add(InlineKeyboardButton(text="‚ùå", callback_data="close"))
    
    # –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ (2 –∫–Ω–æ–ø–∫–∏ –≤ —Ä—è–¥)
    builder.adjust(2)
    
    # –ü–æ–ª—É—á–∞–µ–º –∫–ª–∞–≤–∏–∞—Ç—É—Ä—É
    keyboard = builder.as_markup()
    
    await message.answer(
        "Inline –∫–ª–∞–≤–∏–∞—Ç—É—Ä–∞ —Å–æ–∑–¥–∞–Ω–∞ —Å –ø–æ–º–æ—â—å—é –±–∏–ª–¥–µ—Ä–∞:",
        reply_markup=keyboard
    )
```

### –ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

#### –î–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –∫–Ω–æ–ø–æ–∫

```python
@dp.message(F.text == "–¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π –±–∏–ª–¥–µ—Ä")
async def dynamic_builder_demo(message: types.Message):
    # –°–ø–∏—Å–æ–∫ —Ç–æ–≤–∞—Ä–æ–≤
    products = [
        {"id": 1, "name": "–¢–æ–≤–∞—Ä 1", "price": 100},
        {"id": 2, "name": "–¢–æ–≤–∞—Ä 2", "price": 200},
        {"id": 3, "name": "–¢–æ–≤–∞—Ä 3", "price": 300},
    ]
    
    builder = InlineKeyboardBuilder()
    
    # –î–æ–±–∞–≤–ª—è–µ–º –∫–Ω–æ–ø–∫–∏ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Ç–æ–≤–∞—Ä–∞
    for product in products:
        builder.add(
            InlineKeyboardButton(
                text=f"{product['name']} - {product['price']}‚ÇΩ",
                callback_data=f"product_{product['id']}"
            )
        )
    
    # –î–æ–±–∞–≤–ª—è–µ–º –∫–Ω–æ–ø–∫—É "–ù–∞–∑–∞–¥"
    builder.add(InlineKeyboardButton(text="üîô –ù–∞–∑–∞–¥", callback_data="back"))
    
    # –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ (1 –∫–Ω–æ–ø–∫–∞ –≤ —Ä—è–¥)
    builder.adjust(1)
    
    keyboard = builder.as_markup()
    
    await message.answer(
        "–°–ø–∏—Å–æ–∫ —Ç–æ–≤–∞—Ä–æ–≤:",
        reply_markup=keyboard
    )
```

#### –ö–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –±–∏–ª–¥–µ—Ä–æ–≤

```python
@dp.message(F.text == "–∫–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –±–∏–ª–¥–µ—Ä")
async def combined_builder_demo(message: types.Message):
    # –°–æ–∑–¥–∞–µ–º –±–∏–ª–¥–µ—Ä –¥–ª—è –≤–µ—Ä—Ö–Ω–µ–π —á–∞—Å—Ç–∏
    top_builder = InlineKeyboardBuilder()
    top_builder.add(InlineKeyboardButton(text="üîç –ü–æ–∏—Å–∫", callback_data="search"))
    top_builder.add(InlineKeyboardButton(text="üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞", callback_data="stats"))
    
    # –°–æ–∑–¥–∞–µ–º –±–∏–ª–¥–µ—Ä –¥–ª—è –Ω–∏–∂–Ω–µ–π —á–∞—Å—Ç–∏
    bottom_builder = InlineKeyboardBuilder()
    bottom_builder.add(InlineKeyboardButton(text="‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏", callback_data="settings"))
    bottom_builder.add(InlineKeyboardButton(text="‚ùì –ü–æ–º–æ—â—å", callback_data="help"))
    bottom_builder.add(InlineKeyboardButton(text="üîô –ù–∞–∑–∞–¥", callback_data="back"))
    
    # –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ
    top_builder.adjust(2)
    bottom_builder.adjust(3)
    
    # –û–±—ä–µ–¥–∏–Ω—è–µ–º –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã
    keyboard = InlineKeyboardMarkup(
        inline_keyboard=top_builder.export() + bottom_builder.export()
    )
    
    await message.answer(
        "–ö–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –∫–ª–∞–≤–∏–∞—Ç—É—Ä–∞:",
        reply_markup=keyboard
    )
```

---

## üéØ –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–∏–º–µ—Ä—ã

### –ú–µ–Ω—é –±–æ—Ç–∞

–°–æ–∑–¥–∞–¥–∏–º –ø–æ–ª–Ω–æ—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–µ –º–µ–Ω—é –¥–ª—è –±–æ—Ç–∞:

```python
from aiogram.utils.keyboard import ReplyKeyboardBuilder, InlineKeyboardBuilder

# –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é
@dp.message(F.text == "/start")
async def start_menu(message: types.Message):
    builder = ReplyKeyboardBuilder()
    
    builder.add(KeyboardButton(text="üè† –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é"))
    builder.add(KeyboardButton(text="üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞"))
    builder.add(KeyboardButton(text("üìû –ö–æ–Ω—Ç–∞–∫—Ç—ã"))
    builder.add(KeyboardButton(text("‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏"))
    builder.add(KeyboardButton(text("‚ùì –ü–æ–º–æ—â—å"))
    
    builder.adjust(2, 2, 1)
    
    await message.answer(
        "ü§ñ –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ –±–æ—Ç–∞!\n\n"
        "–í—ã–±–µ—Ä–∏—Ç–µ —Ä–∞–∑–¥–µ–ª –≤ –º–µ–Ω—é:",
        reply_markup=builder.as_markup(resize_keyboard=True)
    )

# –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
@dp.message(F.text == "üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞")
async def stats_menu(message: types.Message):
    builder = InlineKeyboardBuilder()
    
    builder.add(InlineKeyboardButton(text="üìà –î–Ω–µ–≤–Ω–∞—è", callback_data="stats_day"))
    builder.add(InlineKeyboardButton(text="üìä –ù–µ–¥–µ–ª—å–Ω–∞—è", callback_data="stats_week"))
    builder.add(InlineKeyboardButton(text="üìâ –ú–µ—Å—è—á–Ω–∞—è", callback_data="stats_month"))
    builder.add(InlineKeyboardButton(text="üîô –ù–∞–∑–∞–¥", callback_data="back_to_main"))
    
    builder.adjust(2, 1, 1)
    
    await message.answer(
        "üìä –í—ã–±–µ—Ä–∏—Ç–µ –ø–µ—Ä–∏–æ–¥ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏:",
        reply_markup=builder.as_markup()
    )

# –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
@dp.callback_query()
async def handle_stats_callback(callback: types.CallbackQuery):
    if callback.data == "stats_day":
        # –ó–¥–µ—Å—å –ª–æ–≥–∏–∫–∞ –ø–æ–ª—É—á–µ–Ω–∏—è –¥–Ω–µ–≤–Ω–æ–π —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
        await callback.message.edit_text(
            "üìà –î–Ω–µ–≤–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞:\n\n"
            "–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏: 150\n"
            "–°–æ–æ–±—â–µ–Ω–∏—è: 320\n"
            "–ê–∫—Ç–∏–≤–Ω–æ—Å—Ç—å: –í—ã—Å–æ–∫–∞—è",
            reply_markup=get_back_keyboard()
        )
    elif callback.data == "stats_week":
        # –õ–æ–≥–∏–∫–∞ –Ω–µ–¥–µ–ª—å–Ω–æ–π —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
        await callback.message.edit_text(
            "üìä –ù–µ–¥–µ–ª—å–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞:\n\n"
            "–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏: 1050\n"
            "–°–æ–æ–±—â–µ–Ω–∏—è: 2240\n"
            "–ê–∫—Ç–∏–≤–Ω–æ—Å—Ç—å: –°—Ä–µ–¥–Ω—è—è",
            reply_markup=get_back_keyboard()
        )
    elif callback.data == "stats_month":
        # –õ–æ–≥–∏–∫–∞ –º–µ—Å—è—á–Ω–æ–π —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
        await callback.message.edit_text(
            "üìâ –ú–µ—Å—è—á–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞:\n\n"
            "–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏: 4500\n"
            "–°–æ–æ–±—â–µ–Ω–∏—è: 9600\n"
            "–ê–∫—Ç–∏–≤–Ω–æ—Å—Ç—å: –ù–∏–∑–∫–∞—è",
            reply_markup=get_back_keyboard()
        )
    
    await callback.answer()

def get_back_keyboard():
    builder = InlineKeyboardBuilder()
    builder.add(InlineKeyboardButton(text="üîô –ù–∞–∑–∞–¥", callback_data="back_to_main"))
    return builder.as_markup()

# –í–æ–∑–≤—Ä–∞—Ç –≤ –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é
@dp.callback_query(F.data == "back_to_main")
async def back_to_main(callback: types.CallbackQuery):
    builder = ReplyKeyboardBuilder()
    
    builder.add(KeyboardButton(text="üè† –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é"))
    builder.add(KeyboardButton(text="üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞"))
    builder.add(KeyboardButton(text("üìû –ö–æ–Ω—Ç–∞–∫—Ç—ã"))
    builder.add(KeyboardButton(text("‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏"))
    builder.add(KeyboardButton(text("‚ùì –ü–æ–º–æ—â—å"))
    
    builder.adjust(2, 2, 1)
    
    await callback.message.answer(
        "ü§ñ –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é:",
        reply_markup=builder.as_markup(resize_keyboard=True)
    )
    
    await callback.answer()
```

### –û–ø—Ä–æ—Å–Ω–∏–∫

–°–æ–∑–¥–∞–¥–∏–º –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π –æ–ø—Ä–æ—Å–Ω–∏–∫ —Å –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–º–∏ –∫–ª–∞–≤–∏–∞—Ç—É—Ä–∞–º–∏:

```python
# –•—Ä–∞–Ω–∏–ª–∏—â–µ –æ—Ç–≤–µ—Ç–æ–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
user_answers = {}

# –ù–∞—á–∞–ª–æ –æ–ø—Ä–æ—Å–∞
@dp.message(F.text == "–Ω–∞—á–∞—Ç—å –æ–ø—Ä–æ—Å")
async def start_poll(message: types.Message):
    user_answers[message.from_user.id] = {}
    
    keyboard = InlineKeyboardMarkup(
        inline_keyboard=[
            [
                InlineKeyboardButton(text="–î–∞", callback_data="q1_yes"),
                InlineKeyboardButton(text="–ù–µ—Ç", callback_data="q1_no")
            ]
        ]
    )
    
    await message.answer(
        "–í–æ–ø—Ä–æ—Å 1: –í–∞–º –Ω—Ä–∞–≤–∏—Ç—Å—è aiogram?",
        reply_markup=keyboard
    )

# –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—Ç–≤–µ—Ç–æ–≤
@dp.callback_query()
async def handle_poll_callback(callback: types.CallbackQuery):
    user_id = callback.from_user.id
    answers = user_answers.get(user_id, {})
    
    # –í–æ–ø—Ä–æ—Å 1
    if callback.data in ["q1_yes", "q1_no"]:
        answers["q1"] = "–î–∞" if callback.data == "q1_yes" else "–ù–µ—Ç"
        
        # –í–æ–ø—Ä–æ—Å 2
        keyboard = InlineKeyboardMarkup(
            inline_keyboard=[
                [
                    InlineKeyboardButton(text="–ú–µ–Ω—å—à–µ –≥–æ–¥–∞", callback_data="q2_less"),
                    InlineKeyboardButton(text="1-3 –≥–æ–¥–∞", callback_data="q2_1-3"),
                    InlineKeyboardButton(text="–ë–æ–ª—å—à–µ 3 –ª–µ—Ç", callback_data="q2_more")
                ]
            ]
        )
        
        await callback.message.edit_text(
            "–í–æ–ø—Ä–æ—Å 2: –ö–∞–∫ –¥–æ–ª–≥–æ –≤—ã –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä—É–µ—Ç–µ?",
            reply_markup=keyboard
        )
    
    # –í–æ–ø—Ä–æ—Å 2
    elif callback.data.startswith("q2_"):
        answers["q2"] = callback.data.split("_")[1]
        
        # –í–æ–ø—Ä–æ—Å 3
        keyboard = InlineKeyboardMarkup(
            inline_keyboard=[
                [
                    InlineKeyboardButton(text="Python", callback_data="q3_python"),
                    InlineKeyboardButton(text="JavaScript", callback_data="q3_js"),
                    InlineKeyboardButton(text="Java", callback_data="q3_java"),
                    InlineKeyboardButton(text="–î—Ä—É–≥–æ–π", callback_data="q3_other")
                ]
            ]
        )
        
        await callback.message.edit_text(
            "–í–æ–ø—Ä–æ—Å 3: –í–∞—à –ª—é–±–∏–º—ã–π —è–∑—ã–∫ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è?",
            reply_markup=keyboard
        )
    
    # –í–æ–ø—Ä–æ—Å 3
    elif callback.data.startswith("q3_"):
        answers["q3"] = callback.data.split("_")[1]
        
        # –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã
        result_text = (
            "üìä –í–∞—à–∏ –æ—Ç–≤–µ—Ç—ã:\n\n"
            f"1. –í–∞–º –Ω—Ä–∞–≤–∏—Ç—Å—è aiogram: {answers['q1']}\n"
            f"2. –û–ø—ã—Ç –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è: {answers['q2']}\n"
            f"3. –õ—é–±–∏–º—ã–π —è–∑—ã–∫: {answers['q3']}\n\n"
            "–°–ø–∞—Å–∏–±–æ –∑–∞ —É—á–∞—Å—Ç–∏–µ –≤ –æ–ø—Ä–æ—Å–µ!"
        )
        
        await callback.message.edit_text(result_text)
        
        # –£–¥–∞–ª—è–µ–º –æ—Ç–≤–µ—Ç—ã
        if user_id in user_answers:
            del user_answers[user_id]
    
    await callback.answer()
```

### –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞—è –∏–≥—Ä–∞

–°–æ–∑–¥–∞–¥–∏–º –ø—Ä–æ—Å—Ç—É—é –∏–≥—Ä—É "–£–≥–∞–¥–∞–π —á–∏—Å–ª–æ":

```python
import random

# –•—Ä–∞–Ω–∏–ª–∏—â–µ –∏–≥—Ä
games = {}

# –ù–∞—á–∞–ª–æ –∏–≥—Ä—ã
@dp.message(F.text == "–∏–≥—Ä–∞—Ç—å")
async def start_game(message: types.Message):
    # –ó–∞–≥–∞–¥—ã–≤–∞–µ–º —á–∏—Å–ª–æ
    secret_number = random.randint(1, 100)
    games[message.from_user.id] = {
        "number": secret_number,
        "attempts": 0
    }
    
    keyboard = InlineKeyboardMarkup(
        inline_keyboard=[
            [
                InlineKeyboardButton(text="1-25", callback_data="guess_1-25"),
                InlineKeyboardButton(text="26-50", callback_data="guess_26-50"),
                InlineKeyboardButton(text="51-75", callback_data="guess_51-75"),
                InlineKeyboardButton(text="76-100", callback_data="guess_76-100")
            ]
        ]
    )
    
    await message.answer(
        "üéÆ –Ø –∑–∞–≥–∞–¥–∞–ª —á–∏—Å–ª–æ –æ—Ç 1 –¥–æ 100!\n"
        "–£–≥–∞–¥–∞–π—Ç–µ, –≤ –∫–∞–∫–æ–º –¥–∏–∞–ø–∞–∑–æ–Ω–µ –æ–Ω–æ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è:",
        reply_markup=keyboard
    )

# –û–±—Ä–∞–±–æ—Ç–∫–∞ –≤—ã–±–æ—Ä–∞ –¥–∏–∞–ø–∞–∑–æ–Ω–∞
@dp.callback_query(F.data.startswith("guess_"))
async def handle_guess(callback: types.CallbackQuery):
    user_id = callback.from_user.id
    game = games.get(user_id)
    
    if not game:
        await callback.answer("–ò–≥—Ä–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞!", show_alert=True)
        return
    
    # –ü–æ–ª—É—á–∞–µ–º –¥–∏–∞–ø–∞–∑–æ–Ω
    range_str = callback.data.split("_")[1]
    start, end = map(int, range_str.split("-"))
    
    # –ü—Ä–æ–≤–µ—Ä—è–µ–º, –ø–æ–ø–∞–ª–æ –ª–∏ —á–∏—Å–ª–æ –≤ –¥–∏–∞–ø–∞–∑–æ–Ω
    secret_number = game["number"]
    game["attempts"] += 1
    
    if start <= secret_number <= end:
        # –ß–∏—Å–ª–æ –≤ –¥–∏–∞–ø–∞–∑–æ–Ω–µ, —Å—É–∂–∞–µ–º –≤—ã–±–æ—Ä
        if end - start <= 10:
            # –û—Å—Ç–∞–ª–æ—Å—å –º–∞–ª–æ –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤
            keyboard = InlineKeyboardMarkup(
                inline_keyboard=[
                    [
                        InlineKeyboardButton(text=str(i), callback_data=f"exact_{i}")
                        for i in range(start, end + 1)
                    ]
                ]
            )
            await callback.message.edit_text(
                f"üéØ –ß–∏—Å–ª–æ –≤ –¥–∏–∞–ø–∞–∑–æ–Ω–µ {start}-{end}!\n"
                "–í—ã–±–µ—Ä–∏—Ç–µ —Ç–æ—á–Ω–æ–µ —á–∏—Å–ª–æ:",
                reply_markup=keyboard
            )
        else:
            # –î–µ–ª–∏–º –¥–∏–∞–ø–∞–∑–æ–Ω –ø–æ–ø–æ–ª–∞–º
            mid = (start + end) // 2
            keyboard = InlineKeyboardMarkup(
                inline_keyboard=[
                    [
                        InlineKeyboardButton(text=f"{start}-{mid}", callback_data=f"guess_{start}-{mid}"),
                        InlineKeyboardButton(text=f"{mid+1}-{end}", callback_data=f"guess_{mid+1}-{end}")
                    ]
                ]
            )
            await callback.message.edit_text(
                f"‚úÖ –ß–∏—Å–ª–æ –≤ –¥–∏–∞–ø–∞–∑–æ–Ω–µ {start}-{end}!\n"
                "–£—Ç–æ—á–Ω–∏—Ç–µ –¥–∏–∞–ø–∞–∑–æ–Ω:",
                reply_markup=keyboard
            )
    else:
        # –ß–∏—Å–ª–æ –Ω–µ –≤ –¥–∏–∞–ø–∞–∑–æ–Ω–µ
        keyboard = InlineKeyboardMarkup(
            inline_keyboard=[
                [
                    InlineKeyboardButton(text="1-25", callback_data="guess_1-25"),
                    InlineKeyboardButton(text="26-50", callback_data="guess_26-50"),
                    InlineKeyboardButton(text="51-75", callback_data="guess_51-75"),
                    InlineKeyboardButton(text="76-100", callback_data="guess_76-100")
                ]
            ]
        )
        await callback.answer("‚ùå –ß–∏—Å–ª–æ –Ω–µ –≤ —ç—Ç–æ–º –¥–∏–∞–ø–∞–∑–æ–Ω–µ!")
        await callback.message.edit_text(
            f"‚ùå –ß–∏—Å–ª–æ –Ω–µ –≤ –¥–∏–∞–ø–∞–∑–æ–Ω–µ {start}-{end}!\n"
            "–ü–æ–ø—Ä–æ–±—É–π—Ç–µ –¥—Ä—É–≥–æ–π –¥–∏–∞–ø–∞–∑–æ–Ω:",
            reply_markup=keyboard
        )

# –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ç–æ—á–Ω–æ–≥–æ —É–≥–∞–¥—ã–≤–∞–Ω–∏—è
@dp.callback_query(F.data.startswith("exact_"))
async def handle_exact_guess(callback: types.CallbackQuery):
    user_id = callback.from_user.id
    game = games.get(user_id)
    
    if not game:
        await callback.answer("–ò–≥—Ä–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞!", show_alert=True)
        return
    
    guess = int(callback.data.split("_")[1])
    secret_number = game["number"]
    attempts = game["attempts"]
    
    if guess == secret_number:
        # –ü–æ–±–µ–¥–∞!
        await callback.message.edit_text(
            f"üéâ –ü–æ–∑–¥—Ä–∞–≤–ª—è—é! –í—ã —É–≥–∞–¥–∞–ª–∏ —á–∏—Å–ª–æ {secret_number}!\n"
            f"–ü–æ–ø—ã—Ç–æ–∫: {attempts}"
        )
        del games[user_id]
    else:
        # –ù–µ —É–≥–∞–¥–∞–ª–∏
        keyboard = InlineKeyboardMarkup(
            inline_keyboard=[
                [
                    InlineKeyboardButton(text=str(i), callback_data=f"exact_{i}")
                    for i in range(max(1, guess-5), min(100, guess+6))
                ]
            ]
        )
        await callback.answer("‚ùå –ù–µ —É–≥–∞–¥–∞–ª–∏!")
        await callback.message.edit_text(
            f"‚ùå –ß–∏—Å–ª–æ {guess} –Ω–µ –≤–µ—Ä–Ω–æ–µ!\n"
            "–ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â–µ —Ä–∞–∑:",
            reply_markup=keyboard
        )
        game["attempts"] += 1
```

### –ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä

–°–æ–∑–¥–∞–¥–∏–º –ø—Ä–æ—Å—Ç–æ–π –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä —Å inline –∫–Ω–æ–ø–∫–∞–º–∏:

```python
# –•—Ä–∞–Ω–∏–ª–∏—â–µ —Å–æ—Å—Ç–æ—è–Ω–∏–π –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä–∞
calc_states = {}

# –ó–∞–ø—É—Å–∫ –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä–∞
@dp.message(F.text == "–∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä")
async def start_calculator(message: types.Message):
    calc_states[message.from_user.id] = {
        "display": "0",
        "operation": None,
        "operand": None
    }
    
    keyboard = InlineKeyboardMarkup(
        inline_keyboard=[
            [
                InlineKeyboardButton(text="C", callback_data="calc_clear"),
                InlineKeyboardButton(text="‚å´", callback_data="calc_backspace"),
                InlineKeyboardButton(text="%", callback_data="calc_percent"),
                InlineKeyboardButton(text="√∑", callback_data="calc_div")
            ],
            [
                InlineKeyboardButton(text="7", callback_data="calc_7"),
                InlineKeyboardButton(text="8", callback_data="calc_8"),
                InlineKeyboardButton(text="9", callback_data="calc_9"),
                InlineKeyboardButton(text="√ó", callback_data="calc_mul")
            ],
            [
                InlineKeyboardButton(text="4", callback_data="calc_4"),
                InlineKeyboardButton(text="5", callback_data="calc_5"),
                InlineKeyboardButton(text="6", callback_data="calc_6"),
                InlineKeyboardButton(text="-", callback_data="calc_sub")
            ],
            [
                InlineKeyboardButton(text="1", callback_data="calc_1"),
                InlineKeyboardButton(text="2", callback_data="calc_2"),
                InlineKeyboardButton(text="3", callback_data="calc_3"),
                InlineKeyboardButton(text="+", callback_data="calc_add")
            ],
            [
                InlineKeyboardButton(text="0", callback_data="calc_0"),
                InlineKeyboardButton(text=".", callback_data="calc_dot"),
                InlineKeyboardButton(text="=", callback_data="calc_eq"),
                InlineKeyboardButton(text="¬±", callback_data="calc_sign")
            ]
        ]
    )
    
    await message.answer(
        "üßÆ –ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä\n\n"
        "0",
        reply_markup=keyboard
    )

# –û–±—Ä–∞–±–æ—Ç–∫–∞ –Ω–∞–∂–∞—Ç–∏–π –∫–Ω–æ–ø–æ–∫ –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä–∞
@dp.callback_query(F.data.startswith("calc_"))
async def handle_calculator(callback: types.CallbackQuery):
    user_id = callback.from_user.id
    state = calc_states.get(user_id)
    
    if not state:
        await callback.answer("–ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä –Ω–µ –Ω–∞–π–¥–µ–Ω!", show_alert=True)
        return
    
    action = callback.data.split("_")[1]
    display = state["display"]
    operation = state["operation"]
    operand = state["operand"]
    
    # –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ü–∏—Ñ—Ä
    if action.isdigit():
        if display == "0":
            display = action
        else:
            display += action
    
    # –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ–ø–µ—Ä–∞—Ü–∏–π
    elif action in ["add", "sub", "mul", "div"]:
        if operation is None:
            operation = action
            operand = float(display)
            display = "0"
        else:
            # –í—ã–ø–æ–ª–Ω—è–µ–º –ø—Ä–µ–¥—ã–¥—É—â—É—é –æ–ø–µ—Ä–∞—Ü–∏—é
            result = calculate(operand, float(display), operation)
            display = str(result)
            operation = action
            operand = result
    
    # –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã—Ö –∫–Ω–æ–ø–æ–∫
    elif action == "clear":
        display = "0"
        operation = None
        operand = None
    elif action == "backspace":
        if len(display) > 1:
            display = display[:-1]
        else:
            display = "0"
    elif action == "dot":
        if "." not in display:
            display += "."
    elif action == "sign":
        if display.startswith("-"):
            display = display[1:]
        else:
            display = "-" + display
    elif action == "percent":
        display = str(float(display) / 100)
    elif action == "eq":
        if operation is not None:
            result = calculate(operand, float(display), operation)
            display = str(result)
            operation = None
            operand = None
    
    # –û–±–Ω–æ–≤–ª—è–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ
    state["display"] = display
    state["operation"] = operation
    state["operand"] = operand
    
    # –û–±–Ω–æ–≤–ª—è–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ
    keyboard = InlineKeyboardMarkup(
        inline_keyboard=[
            [
                InlineKeyboardButton(text="C", callback_data="calc_clear"),
                InlineKeyboardButton(text="‚å´", callback_data="calc_backspace"),
                InlineKeyboardButton(text="%", callback_data="calc_percent"),
                InlineKeyboardButton(text="√∑", callback_data="calc_div")
            ],
            [
                InlineKeyboardButton(text="7", callback_data="calc_7"),
                InlineKeyboardButton(text="8", callback_data="calc_8"),
                InlineKeyboardButton(text="9", callback_data="calc_9"),
                InlineKeyboardButton(text="√ó", callback_data="calc_mul")
            ],
            [
                InlineKeyboardButton(text="4", callback_data="calc_4"),
                InlineKeyboardButton(text="5", callback_data="calc_5"),
                InlineKeyboardButton(text="6", callback_data="calc_6"),
                InlineKeyboardButton(text="-", callback_data="calc_sub")
            ],
            [
                InlineKeyboardButton(text="1", callback_data="calc_1"),
                InlineKeyboardButton(text="2", callback_data="calc_2"),
                InlineKeyboardButton(text="3", callback_data="calc_3"),
                InlineKeyboardButton(text="+", callback_data="calc_add")
            ],
            [
                InlineKeyboardButton(text="0", callback_data="calc_0"),
                InlineKeyboardButton(text=".", callback_data="calc_dot"),
                InlineKeyboardButton(text="=", callback_data="calc_eq"),
                InlineKeyboardButton(text="¬±", callback_data="calc_sign")
            ]
        ]
    )
    
    await callback.message.edit_text(
        f"üßÆ –ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä\n\n{display}",
        reply_markup=keyboard
    )
    
    await callback.answer()

def calculate(a, b, operation):
    if operation == "add":
        return a + b
    elif operation == "sub":
        return a - b
    elif operation == "mul":
        return a * b
    elif operation == "div":
        return a / b if b != 0 else 0
    return 0
```

---

## üí° –õ—É—á—à–∏–µ –ø—Ä–∞–∫—Ç–∏–∫–∏

### –û—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è –∫–æ–¥–∞

–î–ª—è –±–æ–ª—å—à–∏—Ö –ø—Ä–æ–µ–∫—Ç–æ–≤ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –≤—ã–Ω–æ—Å–∏—Ç—å –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã –≤ –æ—Ç–¥–µ–ª—å–Ω—ã–µ –º–æ–¥—É–ª–∏:

```python
# keyboards/user_keyboards.py
from aiogram.utils.keyboard import ReplyKeyboardBuilder, InlineKeyboardBuilder
from aiogram.types import ReplyKeyboardMarkup, InlineKeyboardMarkup, KeyboardButton, InlineKeyboardButton

def get_main_keyboard():
    builder = ReplyKeyboardBuilder()
    builder.add(KeyboardButton(text="üè† –ì–ª–∞–≤–Ω–∞—è"))
    builder.add(KeyboardButton(text="üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞"))
    builder.add(KeyboardButton(text="‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏"))
    builder.adjust(2, 1)
    return builder.as_markup(resize_keyboard=True)

def get_stats_keyboard():
    builder = InlineKeyboardBuilder()
    builder.add(InlineKeyboardButton(text="üìà –î–µ–Ω—å", callback_data="stats_day"))
    builder.add(InlineKeyboardButton(text="üìä –ù–µ–¥–µ–ª—è", callback_data="stats_week"))
    builder.add(InlineKeyboardButton(text="üìâ –ú–µ—Å—è—Ü", callback_data="stats_month"))
    builder.adjust(3)
    return builder.as_markup()

# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ —Ö–µ–Ω–¥–ª–µ—Ä–∞—Ö
from keyboards.user_keyboards import get_main_keyboard, get_stats_keyboard

@dp.message(F.text == "/start")
async def start(message: types.Message):
    await message.answer(
        "–ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é:",
        reply_markup=get_main_keyboard()
    )
```

### –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

–í—Å–µ–≥–¥–∞ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–π—Ç–µ –≤–æ–∑–º–æ–∂–Ω—ã–µ –æ—à–∏–±–∫–∏ –ø—Ä–∏ —Ä–∞–±–æ—Ç–µ —Å –∫–ª–∞–≤–∏–∞—Ç—É—Ä–∞–º–∏:

```python
@dp.callback_query()
async def safe_callback_handler(callback: types.CallbackQuery):
    try:
        # –†–∞–∑–±–∏—Ä–∞–µ–º callback_data
        data = callback.data
        
        # –ü—Ä–æ–≤–µ—Ä—è–µ–º —Ñ–æ—Ä–º–∞—Ç –¥–∞–Ω–Ω—ã—Ö
        if not data or len(data.split("_")) < 2:
            await callback.answer("–ù–µ–≤–µ—Ä–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –¥–∞–Ω–Ω—ã—Ö!", show_alert=True)
            return
        
        # –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º
        action, item_id = data.split("_", 1)
        
        # –í—ã–ø–æ–ª–Ω—è–µ–º –¥–µ–π—Å—Ç–≤–∏–µ
        if action == "delete":
            await callback.message.delete()
        elif action == "edit":
            await callback.message.edit_text(f"–û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–æ: {item_id}")
        
        await callback.answer()
        
    except Exception as e:
        logging.error(f"–û—à–∏–±–∫–∞ –≤ callback: {e}")
        try:
            await callback.answer("–ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞!", show_alert=True)
        except:
            pass
```

### –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

–î–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏:

1. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –±–∏–ª–¥–µ—Ä—ã** ‚Äî –æ–Ω–∏ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–µ–µ —Ä—É—á–Ω–æ–≥–æ —Å–æ–∑–¥–∞–Ω–∏—è –∫–ª–∞–≤–∏–∞—Ç—É—Ä
2. **–ö—ç—à–∏—Ä—É–π—Ç–µ –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã** ‚Äî –µ—Å–ª–∏ –∫–ª–∞–≤–∏–∞—Ç—É—Ä–∞ –Ω–µ –º–µ–Ω—è–µ—Ç—Å—è, —Å–æ–∑–¥–∞–π—Ç–µ –µ–µ –æ–¥–∏–Ω —Ä–∞–∑
3. **–û–≥—Ä–∞–Ω–∏—á–∏–≤–∞–π—Ç–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫–Ω–æ–ø–æ–∫** ‚Äî Telegram –∏–º–µ–µ—Ç –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –Ω–∞ —Ä–∞–∑–º–µ—Ä —Å–æ–æ–±—â–µ–Ω–∏–π
4. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ adjust** ‚Äî –¥–ª—è —Ä–∞–≤–Ω–æ–º–µ—Ä–Ω–æ–≥–æ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –∫–Ω–æ–ø–æ–∫

```python
# –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–ª–∞–≤–∏–∞—Ç—É—Ä
from functools import lru_cache

@lru_cache(maxsize=100)
def get_cached_keyboard(user_id: int) -> InlineKeyboardMarkup:
    builder = InlineKeyboardBuilder()
    builder.add(InlineKeyboardButton(text="–ö–Ω–æ–ø–∫–∞ 1", callback_data="btn1"))
    builder.add(InlineKeyboardButton(text="–ö–Ω–æ–ø–∫–∞ 2", callback_data="btn2"))
    return builder.as_markup()

# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
@dp.message(F.text == "–∫—ç—à–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –∫–ª–∞–≤–∏–∞—Ç—É—Ä–∞")
async def cached_keyboard(message: types.Message):
    keyboard = get_cached_keyboard(message.from_user.id)
    await message.answer("–ö—ç—à–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –∫–ª–∞–≤–∏–∞—Ç—É—Ä–∞:", reply_markup=keyboard)
```

---

## üéØ –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

–ú—ã –ø–æ–¥—Ä–æ–±–Ω–æ –∏–∑—É—á–∏–ª–∏ –≤—Å–µ –∞—Å–ø–µ–∫—Ç—ã —Ä–∞–±–æ—Ç—ã —Å –∫–Ω–æ–ø–∫–∞–º–∏ –∏ –∫–ª–∞–≤–∏–∞—Ç—É—Ä–∞–º–∏ –≤ aiogram 3.x. –¢–µ–ø–µ—Ä—å –≤—ã —É–º–µ–µ—Ç–µ:
- –°–æ–∑–¥–∞–≤–∞—Ç—å reply –∏ inline –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ —Ç–∏–ø—ã –∫–Ω–æ–ø–æ–∫
- –û–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –Ω–∞–∂–∞—Ç–∏—è –Ω–∞ –∫–Ω–æ–ø–∫–∏
- –°–æ–∑–¥–∞–≤–∞—Ç—å –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ –∏ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã
- –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∫–æ–¥ –∏ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –æ—à–∏–±–∫–∏

**–ö–ª—é—á–µ–≤—ã–µ –º–æ–º–µ–Ω—Ç—ã:**
- Reply –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã –∑–∞–º–µ–Ω—è—é—Ç —Å–∏—Å—Ç–µ–º–Ω—É—é –∫–ª–∞–≤–∏–∞—Ç—É—Ä—É –∏ –ø–æ–¥—Ö–æ–¥—è—Ç –¥–ª—è –æ—Å–Ω–æ–≤–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π
- Inline –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã –≤—Å—Ç—Ä–∞–∏–≤–∞—é—Ç—Å—è –≤ —Å–æ–æ–±—â–µ–Ω–∏—è –∏ –ø–æ–¥—Ö–æ–¥—è—Ç –¥–ª—è –∫–æ–Ω—Ç–µ–∫—Å—Ç–Ω—ã—Ö –¥–µ–π—Å—Ç–≤–∏–π
- –í—Å–µ–≥–¥–∞ –æ—Ç–≤–µ—á–∞–π—Ç–µ –Ω–∞ callback —Å –ø–æ–º–æ—â—å—é `callback.answer()`
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –±–∏–ª–¥–µ—Ä—ã –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —á–∏—Ç–∞–µ–º–æ–≥–æ –∏ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º–æ–≥–æ –∫–æ–¥–∞
- –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–π—Ç–µ –æ—à–∏–±–∫–∏ –∏ —É—á–∏—Ç—ã–≤–∞–π—Ç–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è Telegram

**–ß—Ç–æ –¥–∞–ª—å—à–µ?**
–í —Å–ª–µ–¥—É—é—â–∏—Ö –≥–ª–∞–≤–∞—Ö –º—ã –∏–∑—É—á–∏–º:
- –§–∏–ª—å—Ç—Ä—ã –∏ middleware
- –ö–æ–Ω–µ—á–Ω—ã–µ –∞–≤—Ç–æ–º–∞—Ç—ã (FSM)
- –í–µ–±—Ö—É–∫–∏ –∏ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ
- –ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ aiogram

**–°–æ–≤–µ—Ç—ã –¥–ª—è –ø—Ä–∞–∫—Ç–∏–∫–∏:**
1. –°–æ–∑–¥–∞–π—Ç–µ –±–æ—Ç–∞ —Å –º–Ω–æ–≥–æ—É—Ä–æ–≤–Ω–µ–≤—ã–º –º–µ–Ω—é
2. –†–µ–∞–ª–∏–∑—É–π—Ç–µ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π –æ–ø—Ä–æ—Å–Ω–∏–∫ –∏–ª–∏ –≤–∏–∫—Ç–æ—Ä–∏–Ω—É
3. –°–¥–µ–ª–∞–π—Ç–µ –º–∏–Ω–∏-–∏–≥—Ä—É —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –∫–Ω–æ–ø–æ–∫
4. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–æ–∑–¥–∞—Ç—å –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä –∏–ª–∏ –¥—Ä—É–≥–æ–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç

–ü–æ–º–Ω–∏—Ç–µ, —á—Ç–æ –∫–Ω–æ–ø–∫–∏ –∏ –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã ‚Äî —ç—Ç–æ –º–æ—â–Ω—ã–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —É–¥–æ–±–Ω—ã—Ö –∏ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã—Ö –±–æ—Ç–æ–≤. –≠–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∏—Ä—É–π—Ç–µ, —Å–æ–∑–¥–∞–≤–∞–π—Ç–µ —É–Ω–∏–∫–∞–ª—å–Ω—ã–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã –∏ –Ω–µ –±–æ–π—Ç–µ—Å—å –æ—à–∏–±–æ–∫!

> üí° **–í–∞–∂–Ω–æ:** –í—Å–µ–≥–¥–∞ —Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã –Ω–∞ —Ä–∞–∑–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö –∏ —É—á–∏—Ç—ã–≤–∞–π—Ç–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è Telegram API.

> ‚ö†Ô∏è **–ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ:** –î–ª—è inline –∫–Ω–æ–ø–æ–∫ –≤—Å–µ–≥–¥–∞ –æ—Ç–≤–µ—á–∞–π—Ç–µ –Ω–∞ callback, –∏–Ω–∞—á–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —É–≤–∏–¥–∏—Ç –∑–∞–≥—Ä—É–∑–∫—É.

–£–¥–∞—á–∏ –≤ —Å–æ–∑–¥–∞–Ω–∏–∏ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã—Ö –±–æ—Ç–æ–≤! üéÆ‚ú®